{"version":3,"sources":["../../src/pages/crm-op-detail/crm-op-detail.module.ts","../../src/pipes/pipes.module.ts","../../src/pages/crm-op-detail/crm-op-detail.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CrmOpDetailPage } from './crm-op-detail';\nimport { PipesModule } from '../../pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    CrmOpDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CrmOpDetailPage),\n    PipesModule,\n  ],\n})\nexport class CrmOpDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/crm-op-detail/crm-op-detail.module.ts","import { NgModule } from '@angular/core';\nimport { FilterPipe } from './filter/filter';\nimport { MomentFormatPipe } from './moment-format/moment-format';\nimport { FieldFilterPipe } from './field-filter/field-filter';\nimport { SortPipe } from './sort/sort';\nimport { ObjNgforPipe } from './obj-ngfor/obj-ngfor';\n\n@NgModule({\n  declarations: [\n\t  FilterPipe, \n\t  MomentFormatPipe,\n\t  FieldFilterPipe,\n\t  SortPipe,\n\t  ObjNgforPipe,\n  ],\n  exports: [\n\t  FilterPipe,\n\t  MomentFormatPipe,\n\t  FieldFilterPipe,\n\t  SortPipe,\n\t  ObjNgforPipe,\n  ]\n})\nexport class PipesModule {} \n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs/Observable';\nimport \"rxjs/add/observable/combineLatest\";\n\nimport { CrmDataProvider, SplitShowProvider } from '../../providers';\n\n@IonicPage()\n@Component({\n  selector: 'page-crm-op-detail',\n  templateUrl: 'crm-op-detail.html',\n})\nexport class CrmOpDetailPage {\n\n\t@ViewChild('status') status;\n\tstatusBis;\n\topKey: string;\n\top: any;\n\topObs: Observable<any>\n\tcalipsoObs: Observable<any>;\n\tagendaObs: Observable<any>;\n\tobs: any;\n\tcalipsoObj: any;\n\tagendaObj: any;\n\tpresupuestos: any;\n\tstatusOptions: any;\n\tmonths: any;\n\tactions: any;\n  salesReps: any;\n\tagendaForm: FormGroup;\n\tedit = false;\n\teditAgendaKey: string;\n  totalValue;\n\n  constructor(\n  \tpublic navCtrl: NavController, \n  \tpublic navParams: NavParams,\n  \tprivate crmData: CrmDataProvider,\n  \tprivate splitShow: SplitShowProvider,\n  \tprivate fb: FormBuilder,\n  \t) {\n  \tthis.months = this.crmData.buildCloseMonth();\n  \tthis.statusOptions = this.crmData.statusOptions;\n  \tthis.actions = this.crmData.actions;\n    this.salesReps = this.crmData.salesReps;\n  \tthis.buildForm();\n  }\n\n  ionViewDidLoad() {\n  \tthis.opKey = this.navParams.data.$key;\n    this.opObs = this.crmData.getOp(this.opKey);\n    this.calipsoObs = this.crmData.calipsoObj;\n    this.agendaObs = this.crmData.getAgendaObj();\n\n    this.obs = Observable.combineLatest( this.opObs, this.calipsoObs, this.agendaObs, ( op: any, calipsoObj: any, agendaObj) => ({op, calipsoObj, agendaObj}))\n    .subscribe( (pair: any) => {\n    \tthis.op = pair.op;\n    \tif (this.op) {\n        console.log(this.op);\n    \t\tthis.statusBis = this.op.status;\n    \t\tthis.op['$key'] = this.opKey;\n        this.totalValue = this.op.total;\n    \t}\n    \tthis.calipsoObj = pair.calipsoObj.psp;\n    \tthis.agendaObj = pair.agendaObj;\n    })\n  }\n\n  buildForm() {\n  \tthis.agendaForm = this.fb.group( {\n  \t\ttime: ['', Validators.required],\n  \t\taction: ['',Validators.required],\n  \t\tdesc: ['', Validators.required]\n  \t})\n  }\n\n  change(field: string, value: any) {\n    value === 'Tarruella Alberto Horacio'? value = 'Tarruella Alberto Horacio ': '';\n    field === 'total' ? value = Number(value) : '' ;\n    let form = {};\n    form[field] = value;\n    this.crmData.updateOp(this.op.$key, form)\n    .then( () => console.log(`${field} actualizado`));\n  }\n\n  changeCheck(agendaKey, check) {\n  \tconsole.log(check);\n  \tthis.crmData.updateAgendaItem(agendaKey, { complete: check})\n  \t.then( () => console.log('check actualizado'));\n  }\n\n  submit() {\n  \tif (!this.edit) {\n  \t\tthis.newAgendaItem();\n  \t} else {\n  \t\tthis.editAgendaItem()\n  \t}\n  }\n\n  newAgendaItem() {\n  \tlet form = this.agendaForm.value;\n\t\tform['opKey'] = this.op.$key;\n    form['op'] = this.op.obra;\n\t\tform['clientKey'] = this.op.clientKey;\n    form['client'] = this.op.client;\n\t\tform['complete'] = false;\n\t\tthis.crmData.newAgendaNote(form)\n\t\t.then( ret =>  {\n\t  \tthis.agendaForm.reset();\t\t\t\n\t\t})\n  }\n\n  switchEditAgendaItem(agendaItem, key) {\n  \tconsole.log(agendaItem, key);\n  \tthis.editAgendaKey = key;\n  \tthis.agendaForm.patchValue( {\n  \t\ttime: agendaItem.time,\n  \t\taction: agendaItem.action,\n  \t\tdesc: agendaItem.desc\n  \t})\n  \tthis.edit = true;\n  }\n\n  switchToNew() {\n  \tthis.edit = false;\n  \tthis.editAgendaKey = undefined;\n  \tthis.agendaForm.reset();\n  }\n\n  editAgendaItem() {\n  \tlet updateForm = {\n  \t\ttime: this.agendaForm.value.time,\n  \t\tdesc: this.agendaForm.value.desc,\n  \t\taction: this.agendaForm.value.action\n  \t};\n  \tthis.crmData.updateAgendaItem(this.editAgendaKey, updateForm)\n  \t.then( () => console.log('updated'));\n  }\n\n  deleteAgendaItem(agendaKey) {\n  \tthis.crmData.delteAgendaItem(agendaKey, this.op.$key);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/crm-op-detail/crm-op-detail.ts"],"sourceRoot":""}