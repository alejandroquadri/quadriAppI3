{"version":3,"sources":["../../src/pages/crm-client-form/crm-client-form.module.ts","../../src/pipes/pipes.module.ts","../../src/pages/crm-client-form/crm-client-form.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CrmClientFormPage } from './crm-client-form';\n\nimport { PipesModule } from '../../pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    CrmClientFormPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CrmClientFormPage),\n    PipesModule\n  ],\n})\n\nexport class CrmClientFormPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/crm-client-form/crm-client-form.module.ts","import { NgModule } from '@angular/core';\nimport { FilterPipe } from './filter/filter';\nimport { MomentFormatPipe } from './moment-format/moment-format';\nimport { FieldFilterPipe } from './field-filter/field-filter';\nimport { SortPipe } from './sort/sort';\nimport { ObjNgforPipe } from './obj-ngfor/obj-ngfor';\n\n@NgModule({\n  declarations: [\n\t  FilterPipe, \n\t  MomentFormatPipe,\n\t  FieldFilterPipe,\n\t  SortPipe,\n\t  ObjNgforPipe,\n  ],\n  exports: [\n\t  FilterPipe,\n\t  MomentFormatPipe,\n\t  FieldFilterPipe,\n\t  SortPipe,\n\t  ObjNgforPipe,\n  ]\n})\nexport class PipesModule {} \n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { Validators, FormGroup, FormBuilder } from '@angular/forms';\nimport { Observable } from 'rxjs/Observable';\nimport \"rxjs/add/observable/combineLatest\";\n\nimport { CrmDataProvider } from '../../providers';\n\n@IonicPage()\n@Component({\n  selector: 'page-crm-client-form',\n  templateUrl: 'crm-client-form.html',\n})\nexport class CrmClientFormPage {\n\n\tclientKey: string;\n\tmode: string;\n\teditForm = false;\n\teditContactKey: string;\n\tsalesRep: string;\n\tclientType: string;\n\tsalesReps: any;\n\tclientTypes: any;\n\tclientName: any;\n\n\tclientForm: FormGroup;\n\n\tclientSubs: any;\n\tclientObj: any;\n\tcontactSubs: any;\n\tcontactObj: any;\n\n  constructor(\n  \tpublic navCtrl: NavController,\n  \tpublic navParams: NavParams,\n  \tprivate crmData: CrmDataProvider,\n  \tpublic viewCtrl: ViewController,\n  \tprivate fb: FormBuilder,\n  \t) {\n  \tthis.clientKey = this.navParams.data.$key;\n\t\tthis.mode = this.navParams.data.mode;\n\t\tthis.salesReps = this.crmData.salesReps;\n\t\tthis.clientTypes = this.crmData.clientTypes;\n\t\tthis.buildForm();\n  }\n\n  ionViewDidLoad() {\n\t\tthis.clientSubs = this.crmData.getClient(this.clientKey)\n\t\tthis.contactSubs = this.crmData.getContactObj();\n\t\t\n\t\tObservable.combineLatest(this.clientSubs, this.contactSubs, (client: any, contacts: any) => ({client, contacts}))\n\t\t.subscribe( pair => {\n\t\t\tthis.clientObj = pair.client;\n\t\t\tthis.salesRep = this.clientObj.salesRep;\n\t\t\tthis.clientType = this.clientObj.clientType;\n\t\t\tthis.contactObj = pair.contacts;\n\t\t\tthis.clientName = this.clientObj.name;\n\t\t})\n\t}\n\n  buildForm() {\n  \tthis.clientForm = this.fb.group({\n  \t\tname: ['', Validators.required],\n  \t\ttel: [''],\n  \t\tmail: [''],\n  \t\tpos: [''],\n  \t\tobs: ['']\n  \t});\n\t}\n\t\n\tchange(field: string, value: string) {\n\t\tvalue === 'Tarruella Alberto Horacio'? value = 'Tarruella Alberto Horacio ': '';\n    let form = {};\n    form[field] = value;\n    this.crmData.updateClient(this.clientKey, form)\n    .then( () => console.log(`${field} actualizado`));\n\t}\n\n\tsubmit() {\n  \tif (!this.editForm) {\n  \t\tthis.newContact();\n  \t} else {\n  \t\tthis.editContact()\n  \t}\n\t}\n\n\tnewContact() {\n\t\tlet form = this.clientForm.value;\n\t\tform['clientKey'] = this.clientKey;\n\t\tthis.crmData.newContact(form).then( _ => {\n\t\t\tthis.clientForm.reset();\n\t\t})\n\t}\n\n\tswitchEditContact(contact, contactKey) {\n  \tthis.clientForm.patchValue( {\n  \t\tname: contact.name,\n  \t\ttel: contact.tel,\n  \t\tmail: contact.mail,\n  \t\tpos: contact.pos,\n  \t\tobs: contact.obs\n  \t})\n\t\tthis.editForm = true;\n\t\tthis.editContactKey = contactKey;\n\t}\n\n\tswitchToNew() {\n\t\tthis.editForm = false;\n\t\tthis.editContactKey = undefined;\n\t\tthis.clientForm.reset();\n\t}\n\n\teditContact() {\n\t\tconsole.log(this.editContactKey, this.clientForm);\n\t\tthis.crmData.updateContact(this.editContactKey, this.clientForm.value)\n\t\t.then( _ => console.log('contact updated'));\n\t}\n\n\tdeleteContact(contactKey) {\n\t\tthis.crmData.deleteContact(contactKey, this.clientKey)\n\t\t.then( _ => console.log('contact deleted'));\n\t}\n\n\teditName(newName) {\n\t\tthis.crmData.editClientName(newName, this.clientObj, this.clientKey);\n\t}\n\t\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/crm-client-form/crm-client-form.ts"],"sourceRoot":""}