{"version":3,"sources":["../../src/pages/spare-parts/spare-parts.module.ts","../../src/pipes/pipes.module.ts","../../src/pages/spare-parts/spare-parts.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SparePartsPage } from './spare-parts';\n\nimport { ElasticModule } from 'angular2-elastic';\nimport { PipesModule } from '../../pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    SparePartsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SparePartsPage),\n    ElasticModule,\n    PipesModule,\n  ],\n  exports: [\n    SparePartsPage\n  ]\n})\nexport class SparePartsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/spare-parts/spare-parts.module.ts","import { NgModule } from '@angular/core';\nimport { FilterPipe } from './filter/filter';\nimport { MomentFormatPipe } from './moment-format/moment-format';\nimport { FieldFilterPipe } from './field-filter/field-filter';\nimport { SortPipe } from './sort/sort';\nimport { ObjNgforPipe } from './obj-ngfor/obj-ngfor';\n\n@NgModule({\n  declarations: [\n\t  FilterPipe, \n\t  MomentFormatPipe,\n\t  FieldFilterPipe,\n\t  SortPipe,\n\t  ObjNgforPipe,\n  ],\n  exports: [\n\t  FilterPipe,\n\t  MomentFormatPipe,\n\t  FieldFilterPipe,\n\t  SortPipe,\n\t  ObjNgforPipe,\n  ]\n})\nexport class PipesModule {} \n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform, PopoverController, ToastController, ModalController, Content } from 'ionic-angular';\nimport { Observable } from 'rxjs/Observable';\nimport \"rxjs/add/observable/combineLatest\";\n\nimport { SparePartsDataProvider, SplitShowProvider } from '../../providers';\nimport { FieldFilterPipe, FilterPipe, SortPipe } from '../../pipes';\n\n@IonicPage()\n@Component({\n  selector: 'page-spare-parts',\n  templateUrl: 'spare-parts.html',\n})\nexport class SparePartsPage {\n\n  obsSubs: any;\n  spareSubs: any;\n  filterSubs: any;\n  spareParts: any;\n  sparePartsCrude: any;\n  // @ViewChild(Content) content: Content;\n  filters: any;\n  searchInput: string = '';\n  statusOptions = ['Pendiente', 'Encargado', 'Completo', 'Suspendido'];\n  field = 'fecha';\n  asc = false;\n\n  constructor(\n  \tpublic navCtrl: NavController, \n    public navParams: NavParams,\n    public platform: Platform,\n    public popoverCtrl: PopoverController,\n    public toastCtrl: ToastController,\n    public modalCtrl: ModalController,\n    private spareData: SparePartsDataProvider,\n    private splitShow: SplitShowProvider,\n    private fieldFilterPipe: FieldFilterPipe,\n    private filterPipe: FilterPipe,\n    private sortPipe: SortPipe\n\t) {\n    this.filters = this.spareData.filters;\n  }\n\n  ionViewDidLoad() {\n    this.spareSubs = this.spareData.getSpareParts();\n    // .subscribe( parts => {\n    //   this.sparePartsCrude = parts;\n    //   this.filter();\n    // })\n    // this.spareSubs = this.spareData.getSparePartsMeta()\n    this.filterSubs = this.spareData.filterObs;\n    // .subscribe( filters => {\n    //   this.filters = filters;\n    //   this.filter();\n    // })\n    Observable.combineLatest(this.spareSubs, this.filterSubs, (spare: any, filters:any) => ({spare, filters}))\n    .subscribe( pair => {\n      console.log(pair);\n      this.sparePartsCrude = pair.spare;\n      this.filters = pair.filters;\n      this.filter();\n    });\n  }\n\n  ionViewDidEnter() {\n  }\n\n  ionViewWillUnload() {\n    // this.spareSubs.unsubscribe();\n    // this.filterSubs.unsubscribe();\n    // this.obsSubs.unsubsribe();\n  }\n\n  filter() {\n    const filteredField = this.fieldFilterPipe.transform(this.sparePartsCrude, ['status'], this.changeFilters(this.filters), false);\n    const filtered = this.filterPipe.transform(filteredField, this.searchInput, false);\n    const ordered = this.sortPipe.transform(filtered, this.field, this.asc);\n    this.spareParts = ordered;\n  }\n\n  filter2() {\n    this.sparePartsCrude.filter( (part:any) => {\n      return (part.payload.val())\n    })\n  }\n\n  changeFilters(filters: any) {\n    const keyArr: any[] = Object.keys(filters);\n    let arrayFilter = [];\n    keyArr.forEach(item => {\n      if(filters[item]) {\n        arrayFilter.push(item);\n      }\n    })\n    return arrayFilter;\n  }\n\n  deletepart(key) {\n    this.spareData.deleteSparePart(key);\n  }\n\n  editPart(part) {\n    this.presentModal(part);\n  }\n\n  presentModal(form?: any) {\n     let profileModal = this.modalCtrl.create('SparePartsFormPage', form);\n     profileModal.present();\n   }\n\n  presentToast() {\n    const toast = this.toastCtrl.create({\n      message: 'Enderezar el telefono para editar',\n      duration: 3000\n    });\n    toast.present();\n  }\n\n  presentOptions(myEvent) {\n    let popover = this.popoverCtrl.create('OptionsPage');\n    popover.present({\n      ev: myEvent\n    });\n  }\n\n  changeStatus(status: string, key: string) {\n    console.log('status changed', status, key);\n    this.spareData.updateSparePart(key, {status: status})\n    .then( () => console.log('status actualizado'));\n  }\n\n  // onChange(event) {\n  //   this.spareData.searchInput = event;\n  //   this.spareData.filter();\n  // }\n\n  onChange(event) {\n    this.searchInput = event;\n    this.filter();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/spare-parts/spare-parts.ts"],"sourceRoot":""}